<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>My ChatBot IA</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
   <link rel="icon" type="image/jpg" href="Ordi.jpg">
  <style>
    :root {
      --gradient-bg: linear-gradient(135deg, #3a8bfd 0%, #6c47ff 60%, #f857a6 100%);
      --glass-bg: rgba(35, 41, 70, 0.98);
      --glass-blur: 32px;
      --bubble-user-bg: linear-gradient(90deg, #fff 60%, #f857a6 100%);
      --bubble-web-bg: linear-gradient(90deg, #6c47ff 40%, #ffe082 100%);
      --bubble-radius: 2.1em;
      --shadow: 0 8px 48px #0008, 0 1.5px 0 #fff4 inset;
      --font-main: 'Roboto', Arial, Helvetica, sans-serif;
      --font-title: 'Montserrat', 'Roboto', Arial, Helvetica, sans-serif;
    }
    html, body {
      height: 100%; margin: 0; padding: 0;
      background: var(--gradient-bg) fixed;
    }
    body {
      font-family: var(--font-main);
      min-height: 100vh; min-width: 100vw;
      display: flex; flex-direction: column;
      justify-content: center; align-items: center;
      overflow: hidden;
    }
    .chat-glass {
      width: 100vw; max-width: 830px; min-width: 320px;
      min-height: 100vh; height: 100vh;
      background: var(--glass-bg);
      border-radius: 44px 44px 0 0;
      box-shadow: var(--shadow);
      border: 2.5px solid #fff2;
      backdrop-filter: blur(var(--glass-blur));
      display: flex; flex-direction: column;
      justify-content: flex-end; align-items: stretch;
      position: relative;
      margin: 0 auto;
      overflow: hidden;
      transition: box-shadow 0.25s cubic-bezier(.4,0,.2,1), background 0.25s cubic-bezier(.4,0,.2,1), border-radius 0.25s cubic-bezier(.4,0,.2,1);
    }
    @media (min-width: 1200px) {
      .chat-glass {
        width: 100vw; min-width: 0; max-width: none; border-radius: 0;
      }
    }
    @media (max-width: 900px){
      .chat-glass{max-width:100vw;border-radius:0;}
      .bubble{font-size:1rem;}
      .chat-title{font-size:1.25rem;}
    }
    @media (max-width: 600px){
      .chat-glass{max-width:100vw;min-width:0;width:100vw;border-radius:0;}
      .bubble{max-width: 99vw;}
      .chat-input-row{padding:10px 2vw 13px;}
      .bubble{margin:0 2vw;}
      .chat-title{font-size:1rem;}
    }
    .chat-header {
      display: flex; align-items: center; justify-content: center;
      padding: 48px 0 20px;
      position: relative;
      z-index: 2;
      gap: 18px;
      background: transparent;
    }
    /* Copilot-styled Avatar */
    .bot-avatar {
      width: 95px; height: 95px;
      display: flex; align-items: center; justify-content: center;
      border-radius: 50%;
      background: linear-gradient(135deg, #3a8bfd 30%, #6c47ff 60%, #38ef7d 100%);
      box-shadow: 0 8px 32px #6c47ff48, 0 1.5px 0 #fff2 inset;
      border: 5px solid #fff4;
      animation: floaty 2.2s ease-in-out infinite alternate;
      position: relative;
      overflow: hidden;
    }
    @keyframes floaty { from {transform:translateY(0);} to {transform: translateY(-12px);} }
    .bot-avatar::after {
      content: '';
      position: absolute;
      width: 130%; height: 130%; left: -15%; top: -15%;
      background: conic-gradient(from 180deg at 50% 50%, #fff2 0deg, #38ef7d 90deg, #fff1 180deg, #3a8bfd 270deg, #fff1 360deg);
      pointer-events: none;
      border-radius: 50%;
      opacity: 0.17;
      filter: blur(14px);
      z-index: 0;
    }
    .bot-avatar svg {
      z-index: 1; position: relative; width: 74px; height: 74px;
      filter: drop-shadow(0 0 7px #fff8);
      display: block;
    }
    .copilot-eye {
      animation: copilot-blink 4.2s infinite;
      transform-origin: 50% 50%;
    }
    @keyframes copilot-blink {
      0%, 95%, 100% { ry: 9; }
      97% { ry: 3; }
    }
    /* Brain icon */
    .brain-icon-window {
      position: absolute;
      top: 16px;
      right: 32px;
      z-index: 30;
      width: 44px;
      height: 44px;
      background: none;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
      opacity: 0.93;
    }
    .brain-icon-window svg {
      width: 38px;
      height: 38px;
      display: block;
      filter: drop-shadow(0 2px 8px #3a8bfd88);
    }
    .chat-title {
      font-family: var(--font-title);
      color: #fff;
      font-size: 2.5rem;
      font-weight: 900;
      letter-spacing: 2px;
      text-shadow: 0 2px 16px #232946bb, 0 2px 30px #6c47ff66;
      background: linear-gradient(90deg, #38ef7d 10%, #6c47ff 60%, #3a8bfd 100%);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      background-clip: text; color: transparent;
      display: inline-block;
      margin-left: 4px;
      text-transform: uppercase;
      filter: drop-shadow(0 2px 7px #fff9);
    }
    .chat-messages {
      flex: 1 1 auto;
      overflow-y: auto;
      padding: 0 0 22px 0;
      display: flex; flex-direction: column; gap: 16px;
      width: 100%; min-height: 0;
      scroll-behavior: smooth;
    }
    .bubble {
      max-width: 80vw;
      padding: 20px 28px;
      border-radius: var(--bubble-radius);
      font-size: 1.23rem;
      margin: 0 22px;
      word-break: break-word;
      display: inline-block;
      box-shadow: 0 2px 16px #6c47ff44, 0 2px 7px #f857a644;
      animation: fadeIn .5s;
      backdrop-filter: blur(2px);
      transition: background .2s, box-shadow 0.2s;
      border: 2px solid #fff4;
      line-height: 1.62;
      font-family: var(--font-main);
    }
    .user-bubble {
      background: var(--bubble-user-bg);
      color: #232946;
      align-self: flex-end;
      border-bottom-right-radius: 12px;
      margin-left: auto;
      font-weight: 700;
      box-shadow: 0 2px 8px #f857a677;
      border: 2.2px solid #f857a6bb;
      letter-spacing: 0.01em;
    }
    .web-bubble {
      background: var(--bubble-web-bg);
      color: #232946;
      align-self: flex-start;
      border-bottom-left-radius: 12px;
      margin-right: auto;
      font-weight: 600;
      border: 2.2px solid #3a8bfd77;
      position: relative;
      box-shadow: 0 2px 12px #3a8bfd66;
    }
    @keyframes fadeIn {
      from {opacity:0;transform: translateY(35px);}
      to {opacity:1;transform: translateY(0);}
    }
    .typing {
      display: inline-block;
      min-width: 1em;
      border-right: 2.5px solid #f857a6;
      white-space: pre;
      animation: caret 1s step-end infinite;
      font-family: inherit;
    }
    @keyframes caret { 0%,100%{border-color:transparent;} 50%{border-color:#f857a6;} }
    .chat-input-row {
      background: rgba(35,41,70,0.98);
      display: flex; align-items: center;
      padding: 20px 32px 26px;
      gap: 18px;
      box-shadow: 0 -4px 32px #0003;
      position: relative; z-index: 5;
      border-radius: 0 0 38px 38px;
      border-top: 2px solid #fff2;
    }
    .chat-input-row input[type="text"] {
      flex: 1;
      padding: 18px 26px;
      font-size: 1.22rem;
      background: #fff9;
      color: #232946;
      border: 2.5px solid #6c47ff;
      border-radius: 26px;
      outline: none;
      transition: border .2s, background .2s;
      min-width: 0;
      font-weight: 600;
      box-shadow: 0 2px 8px #6c47ff16 inset;
      font-family: var(--font-main);
      letter-spacing: 0.03em;
    }
    .chat-input-row input[type="text"]:focus {
      border: 2.5px solid #38ef7d;
      background: #fffde8;
    }
    .chat-input-row button {
      background: linear-gradient(90deg, #6c47ff 10%, #38ef7d 90%);
      color: #232946;
      border: none;
      border-radius: 26px;
      padding: 15px 44px;
      font-size: 1.19rem;
      font-weight: 900;
      cursor: pointer;
      transition: background .2s, box-shadow .18s;
      box-shadow: 0 2px 14px #38ef7d44;
      letter-spacing: 0.07em;
      text-shadow: 0 1px 0 #fff8;
      font-family: var(--font-title);
      text-transform: uppercase;
      border: 2px solid #3a8bfd;
    }
    .chat-input-row button:active {
      background: linear-gradient(90deg, #38ef7d 60%, #6c47ff 100%);
      color: #232946;
    }
    .footer {
      text-align: center;
      color: #fff;
      font-size: 1.13rem;
      padding: 8px 8px 7px 8px;
      opacity: 0.98;
      background: transparent;
      border: 0;
      letter-spacing: 0.07em;
      margin-bottom: 6px;
      text-shadow: 0 1px 8px #6c47ff55;
      font-family: var(--font-title);
      font-weight: 700;
    }
    .web-link {
      color: #3a8bfd;
      text-decoration: underline;
      font-weight: 700;
      word-break: break-all;
      transition: color .18s;
    }
    .web-link:hover {
      color: #38ef7d;
      text-decoration: underline wavy;
    }
    ::selection {
      background: #38ef7d55;
    }
    ::-webkit-scrollbar { width: 12px; background: #23294644;}
    ::-webkit-scrollbar-thumb { background: #6c47ffbb; border-radius: 8px;}
    ::-webkit-scrollbar-thumb:hover { background: #38ef7ddd;}
  </style>
</head>
<body>
  <div class="chat-glass">
    <div class="brain-icon-window">
      <!-- Brain SVG Icon -->
      <svg viewBox="0 0 40 40" fill="none">
        <ellipse cx="20" cy="20" rx="18" ry="16" fill="#fff" opacity="0.11"/>
        <path d="M26.5 6.5c-1-2.5-6-2.5-7 0-2-2.5-7.5-1-8.5 2.5-1.5 5 0 7-3 9.5-2.5 2-2 7 0.5 8.5 2.5 1.5 3 4.5 3 5.5s1.5 2.5 4.5 2.5c1.5 0 2.5 1.5 4 1.5s2.5-1 4-1.5c3 0 4.5-1.5 4.5-2.5s0.5-4 3-5.5c2.5-1.5 3-6.5 0.5-8.5-3-2.5-1.5-4.5-3-9.5-1-3.5-6.5-5-8.5-2.5z" fill="#fff"/>
        <path d="M26.5 6.5c-1-2.5-6-2.5-7 0-2-2.5-7.5-1-8.5 2.5-1.5 5 0 7-3 9.5-2.5 2-2 7 0.5 8.5 2.5 1.5 3 4.5 3 5.5s1.5 2.5 4.5 2.5c1.5 0 2.5 1.5 4 1.5s2.5-1 4-1.5c3 0 4.5-1.5 4.5-2.5s0.5-4 3-5.5c2.5-1.5 3-6.5 0.5-8.5-3-2.5-1.5-4.5-3-9.5-1-3.5-6.5-5-8.5-2.5z" fill="url(#brainGradient)" stroke="#3a8bfd" stroke-width="2"/>
        <defs>
          <linearGradient id="brainGradient" x1="3" y1="10" x2="37" y2="30" gradientUnits="userSpaceOnUse">
            <stop stop-color="#38ef7d"/>
            <stop offset="0.5" stop-color="#6c47ff"/>
            <stop offset="1" stop-color="#f857a6"/>
          </linearGradient>
        </defs>
      </svg>
    </div>
    <div class="chat-header">
      <div class="bot-avatar">
        <!-- Copilot inspired SVG avatar -->
        <svg width="74" height="74" viewBox="0 0 74 74" fill="none">
          <defs>
            <radialGradient id="copilot-face" cx="0.4" cy="0.35" r="0.65">
              <stop offset="0%" stop-color="#38ef7d"/>
              <stop offset="70%" stop-color="#3a8bfd"/>
              <stop offset="100%" stop-color="#6c47ff"/>
            </radialGradient>
          </defs>
          <!-- Main face -->
          <ellipse cx="37" cy="37" rx="31" ry="29" fill="url(#copilot-face)" stroke="#fff" stroke-width="4"/>
          <!-- Cheeks -->
          <ellipse cx="24" cy="48" rx="5" ry="3" fill="#fff" opacity="0.24"/>
          <ellipse cx="50" cy="48" rx="5" ry="3" fill="#fff" opacity="0.24"/>
          <!-- Eyes -->
          <ellipse class="copilot-eye" cx="26" cy="34" rx="9" ry="9" fill="#fff"/>
          <ellipse class="copilot-eye" cx="48" cy="34" rx="9" ry="9" fill="#fff"/>
          <ellipse cx="26" cy="34" rx="4" ry="4.4" fill="#232946"/>
          <ellipse cx="48" cy="34" rx="4" ry="4.4" fill="#232946"/>
          <ellipse cx="26" cy="34" rx="1.3" ry="1.7" fill="#a2ffe6"/>
          <ellipse cx="48" cy="34" rx="1.3" ry="1.7" fill="#a2ffe6"/>
          <!-- Smile -->
          <path d="M25 50 Q37 58 49 50" stroke="#fff" stroke-width="3.5" fill="none" stroke-linecap="round"/>
          <path d="M27 50 Q37 54 47 50" stroke="#232946" stroke-width="2" fill="none" stroke-linecap="round"/>
          <!-- Chin highlight -->
          <ellipse cx="37" cy="62" rx="13" ry="3.3" fill="#fff" opacity="0.09"/>
        </svg>
      </div>
      <span class="chat-title">My ChatBot AI</span>
    </div>
    <div class="chat-messages" id="messages"></div>
    <form id="chat-form" autocomplete="off" class="chat-input-row">
      <input type="text" id="user-input" placeholder="Pose ta question (le bot cherche sur le web)..." autofocus required />
      <button type="submit">Envoyer</button>
    </form>
    <div class="footer">
      Essaie : « Qui est Albert Einstein ? », « Définition de l’atome », « Capitale du Japon ? », « Combien de dents a un humain ? »
    </div>
  </div>
  <script>
    function escapeHtml(str) {
      return str.replace(/[&<>"']/g, function(m) {
        return ({
          '&': '&amp;',
          '<': '&lt;',
          '>': '&gt;',
          '"': '&quot;',
          "'": '&#39;'
        })[m];
      });
    }
    // Affichage animé
    function appendMessage(text, cls, typing=false, htmlMode=false) {
      const messages = document.getElementById('messages');
      const msgDiv = document.createElement('div');
      msgDiv.className = "bubble " + cls;
      if (typing) {
        let i = 0;
        let span = document.createElement('span');
        span.className = "typing";
        msgDiv.appendChild(span);
        messages.appendChild(msgDiv);
        messages.scrollTop = messages.scrollHeight;
        function typeChar() {
          span.innerHTML = htmlMode ? text.slice(0, i) : escapeHtml(text.slice(0, i));
          if (i < text.length) {
            i++; setTimeout(typeChar, 7 + Math.random()*11);
          } else {
            span.classList.remove('typing');
          }
          messages.scrollTop = messages.scrollHeight;
        }
        typeChar();
      } else {
        msgDiv.innerHTML = htmlMode ? text : escapeHtml(text);
        messages.appendChild(msgDiv);
        messages.scrollTop = messages.scrollHeight;
      }
    }
    // Recherche web DuckDuckGo API (pas besoin de clé)
    async function fetchWebBestAnswer(question, lang='fr') {
      const params = new URLSearchParams({
        q: question,
        format: "json",
        no_html: "1",
        t: "chatbot"
      });
      const url = `https://api.duckduckgo.com/?${params.toString()}`;
      try {
        const resp = await fetch(url);
        const data = await resp.json();
        // Cherche la réponse la plus appropriée : Abstract > Answer > Definition > snippet 1er lien > liens
        let answer = '';
        let links = [];
        if (data.AbstractText) answer = data.AbstractText;
        else if (data.Answer) answer = data.Answer;
        else if (data.Definition) answer = data.Definition;
        else if (data.RelatedTopics && data.RelatedTopics.length > 0) {
          // Premier topic text
          for (let i = 0; i < data.RelatedTopics.length; ++i) {
            if (data.RelatedTopics[i].Text) {
              answer = data.RelatedTopics[i].Text;
              break;
            }
            if (data.RelatedTopics[i].Topics && data.RelatedTopics[i].Topics[0] && data.RelatedTopics[i].Topics[0].Text) {
              answer = data.RelatedTopics[i].Topics[0].Text;
              break;
            }
          }
        }
        if (data.AbstractURL && data.Heading) {
          links.push({ title: data.Heading, link: data.AbstractURL });
        }
        if (data.RelatedTopics && data.RelatedTopics.length > 0) {
          for (let i = 0; i < Math.min(3, data.RelatedTopics.length); ++i) {
            const t = data.RelatedTopics[i];
            if (t.Text && t.FirstURL) {
              links.push({ title: t.Text, link: t.FirstURL });
            } else if (t.Topics && t.Topics.length > 0) {
              const sub = t.Topics[0];
              if (sub.Text && sub.FirstURL) {
                links.push({ title: sub.Text, link: sub.FirstURL });
              }
            }
          }
        }
        answer = answer || "Je n'ai pas trouvé de réponse directe, mais voici des liens utiles :";
        return { answer, links };
      } catch (e) {
        return { answer: "Erreur lors de la recherche web…", links: [] };
      }
    }
    document.getElementById('chat-form').addEventListener('submit', async function(e) {
      e.preventDefault();
      const input = document.getElementById('user-input');
      const userText = input.value;
      if (userText.trim() === "") return;
      appendMessage(userText, "user-bubble");
      setTimeout(async () => {
        appendMessage("Recherche de la meilleure réponse sur le web...", "web-bubble", true);
        const web = await fetchWebBestAnswer(userText, "fr");
        let html = escapeHtml(web.answer);
        if (web.links && web.links.length > 0) {
          html += '<ul style="margin:9px 0 2px 0;padding-left:22px">';
          for (const l of web.links) {
            html += `<li><a class="web-link" href="${l.link}" target="_blank" rel="noopener">${escapeHtml(l.title)}</a></li>`;
          }
          html += '</ul>';
        }
        appendMessage(html, "web-bubble", false, true);
      }, 320 + Math.floor(Math.random()*170));
      input.value = "";
    });
    setTimeout(() => appendMessage(
      "✨ Salut ! Je suis un chatbot qui cherche pour toi la réponse la plus appropriée sur le web. Pose-moi n'importe quelle question !",
      "web-bubble", true), 320);
  </script>
</body>
</html>
